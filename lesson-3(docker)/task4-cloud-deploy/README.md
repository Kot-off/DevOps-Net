# Отчет по Задаче №4: Развертывание проекта в Yandex Cloud

Данный проект демонстрирует навыки автоматизации деплоя, настройки цепочки проксирования трафика в Docker и удаленного управления инфраструктурой через Docker Context.

##  Параметры окружения

* **Виртуальная машина:** Yandex Cloud (Intel Cascade Lake, 1 ГБ RAM).
* **Публичный IP:** `158.160.30.114`
* **Целевой каталог:** `/opt/devops-net`
* **Технологический стек:** Nginx (Proxy) → HAProxy (LB) → FastAPI (App) → MySQL (DB).

---

##  Процесс развертывания

Для автоматизации был использован Bash-скрипт `deploy.sh`. Скрипт выполняет:

1. Установку Docker и необходимых системных утилит.
2. Клонирование репозитория в каталог `/opt`.
3. Запуск проекта через `docker compose` с автоматической настройкой `.env`.

---

##  Подтверждение выполнения (Скриншоты)


### 1. Работа контейнеров в облаке

Проверка статуса всех сервисов непосредственно на ВМ. Должно быть запущено 4 контейнера.

```bash
docker ps

```

[Работа контейнеров в облаке](./images/Скриншот-1_Работа%20контейнеров%20в%20облаке.png)


---

### 2. Проверка доступности (Traffic Chain)

Валидация прохождения трафика через всю цепочку: **Internet → Nginx → HAProxy → FastAPI**.

* **Ссылка для проверки:** [check-host.net](http://158.160.30.114:8090)

[Проверка доступности (Traffic Chain)](./images/Скриншот-2_%20Проверка%20через%20check-host.png)
---

### 3. Анализ образа через Dive

Использование инструмента `dive` для оценки эффективности Docker-образа и анализа слоев.

```bash
docker run --rm -it \
    -v /var/run/docker.sock:/var/run/docker.sock \
    wagoodman/dive:latest task3-docker-compose-web:latest

```

[Анализ образа через Dive](./images/Скриншот-3_Анализ%20образа%20через%20Dive.png)

---

### 4. Валидация базы данных (SQL)

Проверка успешного подключения приложения к БД и корректности структуры таблиц.

```bash
docker exec -it mysql-db mysql -uroot -pstrong_root_password_123 -e "use netology; SELECT * FROM requests;"

```

[Валидация базы данных (SQL)](./images/Скриншот-4_Результат%20SQL-запроса.png)

---

### 5. Удаленный Docker Context

Демонстрация работы с облачной инфраструктурой с локальной машины через SSH-туннель.

```bash
docker context ls
docker --context yc-cloud ps

```

[Удаленный Docker Context](./images/Скриншот-5_Удаленный%20контекст%20(Remote%20SSH%20Context).png)

---
